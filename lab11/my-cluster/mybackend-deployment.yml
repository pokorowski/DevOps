apiVersion: apps/v1
kind: Deployment
metadata:
  name: mybackend-deployment
  labels:
    app: myapp-backend
    type: backend
spec:
  template:
    metadata:
      name: mybackend-pod
      labels:
        app: myapp-backend
        type: backend
    
    spec:
      containers:
          - name: my-mybackend-container
            image: pokorowski/mybackend
    
            env:
              - name: REDIS_HOST    
                value: myredisservice
              - name: REDIS_PORT
                value: '6379'
              - name PGUSER
                value: postgres
              - name PGPASSWORD
                value: testpassword123
              - name PGHOST
                value: my-postgres-server
              - name PGDATABASE
                value: postgres
              - name PGPORT
                value: '5432'         

  replicas: 3
  selector:
    matchLabels:
      type: backend

